@using WordMasterMind.Library.Helpers
<div class="game-row row">
    @{
        if (GameStateMachine.Game is null)
            throw new Exception(message: "Unexpected game state/null game");
    }
    @if (AttemptIndex < GameStateMachine.Game.CurrentAttempt)
    {
        foreach (var attemptLetterDetail in GameStateMachine.Game.GetAttempt(attemptIndex: AttemptIndex))
        {
            <GameTile
                Letter="@attemptLetterDetail.Letter.ToString()"
                Evaluation="@attemptLetterDetail.Evaluation.ToString().ToLowerInvariant()"
                Reveal="@((attemptLetterDetail.Evaluation is LetterEvaluation.Correct).ToString().ToLowerInvariant())"/>
        }
    }
    else
    {
        for (int letterIndex = 0; letterIndex < GameStateMachine.WordLength; letterIndex++)
        {
            var currentLetter = letterIndex > GameStateMachine.CurrentAttemptString.Length ? Constants.EmptyChar : GameStateMachine.CurrentAttemptString[letterIndex];
            <GameTile
                Letter="@currentLetter.ToString()"
                Evaluation="@Enum.GetName(typeof(LetterEvaluation), LetterEvaluation.Absent)"
                Reveal="false"></GameTile>
        }
    }
</div>